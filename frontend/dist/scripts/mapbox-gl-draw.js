!function t(e,n,r){function i(u,a){if(!n[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return new u["default"](t)}var o=t("./src/draw"),u=r(o);window.mapboxgl?mapboxgl.Draw=i:"undefined"!=typeof e&&(e.exports=i)},{"./src/draw":7}],2:[function(t,e,n){var r=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),0>=t)return"0";for(var n=Math.log(Math.pow(2,t))/Math.log(e),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,t/i))/Math.log(e)*i;for(var o=n-Math.floor(n),u="",i=0;i<Math.floor(n);i++){var a=Math.floor(Math.random()*e).toString(e);u=a+u}if(o){var s=Math.pow(e,o),a=Math.floor(Math.random()*s).toString(e);u=a+u}var c=parseInt(u,e);return c!==1/0&&c>=Math.pow(2,t)?r(t,e):u};r.rack=function(t,e,n){var i=function(i){var u=0;do{if(u++>10){if(!n)throw new Error("too many ID collisions, use more bits");t+=n}var a=r(t,e)}while(Object.hasOwnProperty.call(o,a));return o[a]=i,a},o=i.hats={};return i.get=function(t){return i.hats[t]},i.set=function(t,e){return i.hats[t]=e,i},i.bits=t||128,i.base=e||16,i}},{}],3:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],4:[function(t,e,n){(function(){"use strict";var t={"@@functional/placeholder":!0},r=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,u){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,u,a){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,u,a,s){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,u,a,s,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,u,a,s,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},i=function(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))},o=function(t){return function(){return!t.apply(this,arguments)}},u=function(t,e){t=t||[],e=e||[];var n,r=t.length,i=e.length,o=[];for(n=0;r>n;)o[o.length]=t[n],n+=1;for(n=0;i>n;)o[o.length]=e[n],n+=1;return o},a=function(t,e,n){for(var r=0,i=n.length;i>r;){if(t(e,n[r]))return!0;r+=1}return!1},s=function(t){return function e(n){return 0===arguments.length?e:null!=n&&n["@@functional/placeholder"]===!0?e:t.apply(this,arguments)}},c=function(t){return function e(n,r){var i=arguments.length;return 0===i?e:1===i&&null!=n&&n["@@functional/placeholder"]===!0?e:1===i?s(function(e){return t(n,e)}):2===i&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0?e:2===i&&null!=n&&n["@@functional/placeholder"]===!0?s(function(e){return t(e,r)}):2===i&&null!=r&&r["@@functional/placeholder"]===!0?s(function(e){return t(n,e)}):t(n,r)}},l=function(t){return function e(n,r,i){var o=arguments.length;return 0===o?e:1===o&&null!=n&&n["@@functional/placeholder"]===!0?e:1===o?c(function(e,r){return t(n,e,r)}):2===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0?e:2===o&&null!=n&&n["@@functional/placeholder"]===!0?c(function(e,n){return t(e,r,n)}):2===o&&null!=r&&r["@@functional/placeholder"]===!0?c(function(e,r){return t(n,e,r)}):2===o?s(function(e){return t(n,r,e)}):3===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0&&null!=i&&i["@@functional/placeholder"]===!0?e:3===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=r&&r["@@functional/placeholder"]===!0?c(function(e,n){return t(e,n,i)}):3===o&&null!=n&&n["@@functional/placeholder"]===!0&&null!=i&&i["@@functional/placeholder"]===!0?c(function(e,n){return t(e,r,n)}):3===o&&null!=r&&r["@@functional/placeholder"]===!0&&null!=i&&i["@@functional/placeholder"]===!0?c(function(e,r){return t(n,e,r)}):3===o&&null!=n&&n["@@functional/placeholder"]===!0?s(function(e){return t(e,r,i)}):3===o&&null!=r&&r["@@functional/placeholder"]===!0?s(function(e){return t(n,e,i)}):3===o&&null!=i&&i["@@functional/placeholder"]===!0?s(function(e){return t(n,r,e)}):t(n,r,i)}},f=function ci(t,e,n){return function(){for(var i=[],o=0,u=t,a=0;a<e.length||o<arguments.length;){var s;a<e.length&&(null==e[a]||e[a]["@@functional/placeholder"]!==!0||o>=arguments.length)?s=e[a]:(s=arguments[o],o+=1),i[a]=s,null!=s&&s["@@functional/placeholder"]===!0||(u-=1),a+=1}return 0>=u?n.apply(this,i):r(u,ci(t,i,n))}},p=function(t,e){for(var n=0,r=e.length,i=[];r>n;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i},h=function(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}},d=function(t){return function(e){return p(function(t){return"function"==typeof e[t]},t(e))}},y=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)},v=function(t){return t},g=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)},m=Number.isInteger||function(t){return t<<0===t},_=function(t){return"[object Number]"===Object.prototype.toString.call(t)},w=function(t){return"[object String]"===Object.prototype.toString.call(t)},b=function(t){return"function"==typeof t["@@transducer/step"]},x=function(t,e){for(var n=0,r=e.length,i=Array(r);r>n;)i[n]=t(e[n]),n+=1;return i},O=function(t,e){return function(){return e.call(this,t.apply(this,arguments))}},k=function(t,e){return function(){var n=this;return t.apply(n,arguments).then(function(t){return e.call(n,t)})}},j=function(t){return'"'+t.replace(/"/g,'\\"')+'"'},S=function(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}},C=function li(t,e,n){switch(arguments.length){case 1:return li(t,0,t.length);case 2:return li(t,e,t.length);default:for(var r=[],i=0,o=Math.max(0,Math.min(t.length,n)-e);o>i;)r[i]=t[e+i],i+=1;return r}},P=function(){var t=function(t){return(10>t?"0":"")+t};return"function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(e){return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),M=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=function(){return this.xf["@@transducer/init"]()},t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(n=!0):this.seenFirstValue=!0,this.lastValue=e,n?t:this.xf["@@transducer/step"](t,e)},c(function(e,n){return new t(e,n)})}(),E={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},N=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=E.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},c(function(e,n){return new t(e,n)})}(),D=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=S(this.xf["@@transducer/step"](t,e))),t},c(function(e,n){return new t(e,n)})}(),I=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=S(this.xf["@@transducer/step"](t,this.idx))),t},c(function(e,n){return new t(e,n)})}(),L=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},c(function(e,n){return new t(e,n)})}(),A=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},c(function(e,n){return new t(e,n)})}(),T=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=E.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},c(function(e,n){return new t(e,n)})}(),q=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=E.result,t.prototype["@@transducer/step"]=function(t,e){return 0===this.n?S(t):(this.n-=1,this.xf["@@transducer/step"](t,e))},c(function(e,n){return new t(e,n)})}(),B=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=E.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):S(t)},c(function(e,n){return new t(e,n)})}(),F=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},function(e){return new t(e)}}(),R=c(function(t,e){return t+e}),J=l(function(t,e,n){if(e>=n.length||e<-n.length)return n;var r=0>e?n.length:0,i=r+e,o=u(n);return o[i]=t(n[i]),o}),U=s(function(t){return function(){return t}}),G=c(function(t,e){for(var n=0,r=e.length-(t-1),i=new Array(r>=0?r:0);r>n;)i[n]=C(e,n,n+t),n+=1;return i}),W=c(function(t,e){return u(e,[t])}),V=c(function(t,e){return t.apply(this,e)}),$=l(function(t,e,n){var r={};for(var i in n)r[i]=n[i];return r[t]=e,r}),K=l(function fi(t,e,n){switch(t.length){case 0:return n;case 1:return $(t[0],e,n);default:return $(t[0],fi(C(t,1),e,Object(n[t[0]])),n)}}),Y=c(function(t,e){return r(t.length,function(){return t.apply(e,arguments)})}),Z=c(function(t,e){return function(){return t.apply(this,arguments)&&e.apply(this,arguments)}}),z=s(function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}}),Q=s(o),X=s(function(t){return function(){for(var e=0;e<t.length;){if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments);e+=1}}}),H=l(a),tt=c(function(t,e){for(var n={},r=e.length,i=0;r>i;){var o=t(e[i]);n[o]=(y(o,n)?n[o]:0)+1,i+=1}return n}),et=c(function(t,e){var n={};return n[t]=e,n}),nt=c(function(t,e){return 1===t?s(e):r(t,f(t,[],e))}),rt=R(-1),it=c(function(t,e){return null==e?t:e}),ot=l(function(t,e,n){for(var r=[],i=0,o=e.length,u=H(t);o>i;)u(e[i],n)||u(e[i],r)||(r[r.length]=e[i]),i+=1;return r}),ut=c(function(t,e){var n={};for(var r in e)r!==t&&(n[r]=e[r]);return n}),at=c(function pi(t,e){switch(t.length){case 0:return e;case 1:return ut(t[0],e);default:var n=t[0],r=C(t,1);return null==e[n]?e:$(n,pi(r,e[n]),e)}}),st=c(function(t,e){return t/e}),ct=c(function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return C(e,0,n+1)}),lt=c(function(t,e){return function(){return t.apply(this,arguments)||e.apply(this,arguments)}}),ft=s(function(t){if(null!=t&&"function"==typeof t.empty)return t.empty();if(null!=t&&null!=typeof t.constructor&&"function"==typeof t.constructor.empty)return t.constructor.empty();switch(Object.prototype.toString.call(t)){case"[object Array]":return[];case"[object Object]":return{};case"[object String]":return""}}),pt=c(function hi(t,e){var n,r,i,o={};for(r in e)n=t[r],i=typeof n,o[r]="function"===i?n(e[r]):"object"===i?hi(t[r],e[r]):e[r];return o}),ht=s(function(t){for(var e=0,n=t.length,r={};n>e;)g(t[e])&&t[e].length&&(r[t[e][0]]=t[e][1]),e+=1;return r}),dt=c(function(t,e){return t>e}),yt=c(function(t,e){return t>=e}),vt=c(y),gt=c(function(t,e){return t in e}),mt=c(function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}),_t=s(v),wt=l(function(t,e,n){return nt(Math.max(t.length,e.length,n.length),function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)})}),bt=R(1),xt=l(function(t,e,n){t=t<n.length&&t>=0?t:n.length;var r=C(n);return r.splice(t,0,e),r}),Ot=l(function(t,e,n){return t=t<n.length&&t>=0?t:n.length,u(u(C(n,0,t),e),C(n,t))}),kt=c(function(t,e){return null!=e&&e.constructor===t||e instanceof t}),jt=s(function(t){return g(t)?!0:t?"object"!=typeof t?!1:t instanceof String?!1:1===t.nodeType?!!t.length:0===t.length?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1:!1}),St=s(function(t){return 0===Object(t).length}),Ct=s(function(t){return null==t}),Pt=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1};return s("function"==typeof Object.keys?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(r){if(Object(r)!==r)return[];var i,o,u=[];for(i in r)y(i,r)&&(u[u.length]=i);if(t)for(o=e.length-1;o>=0;)i=e[o],y(i,r)&&!n(u,i)&&(u[u.length]=i),o-=1;return u})}(),Mt=s(function(t){var e,n=[];for(e in t)n[n.length]=e;return n}),Et=s(function(t){return null!=t&&kt(Number,t.length)?t.length:NaN}),Nt=c(function(t,e){return e>t}),Dt=c(function(t,e){return e>=t}),It=l(function(t,e,n){for(var r=0,i=n.length,o=[],u=[e];i>r;)u=t(u[0],n[r]),o[r]=u[1],r+=1;return[u[0],o]}),Lt=l(function(t,e,n){for(var r=n.length-1,i=[],o=[e];r>=0;)o=t(o[0],n[r]),i[r]=o[1],r-=1;return[o[0],i]}),At=c(function(t,e){return e.match(t)||[]}),Tt=c(function(t,e){return m(t)?!m(e)||1>e?NaN:(t%e+e)%e:NaN}),qt=c(function(t,e){return e>t?e:t}),Bt=l(function(t,e,n){return t(n)>t(e)?n:e}),Ft=c(function(t,e){for(var n={},r=Pt(t),i=0;i<r.length;)n[r[i]]=t[r[i]],i+=1;for(r=Pt(e),i=0;i<r.length;)n[r[i]]=e[r[i]],i+=1;return n}),Rt=c(function(t,e){return t>e?e:t}),Jt=l(function(t,e,n){return t(n)<t(e)?n:e}),Ut=c(function(t,e){return t%e}),Gt=c(function(t,e){return t*e}),Wt=c(function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,i){return e.call(this,t,n,r,i)};case 5:return function(t,n,r,i,o){return e.call(this,t,n,r,i,o)};case 6:return function(t,n,r,i,o,u){return e.call(this,t,n,r,i,o,u)};case 7:return function(t,n,r,i,o,u,a){return e.call(this,t,n,r,i,o,u,a)};case 8:return function(t,n,r,i,o,u,a,s){return e.call(this,t,n,r,i,o,u,a,s)};case 9:return function(t,n,r,i,o,u,a,s,c){return e.call(this,t,n,r,i,o,u,a,s,c)};case 10:return function(t,n,r,i,o,u,a,s,c,l){return e.call(this,t,n,r,i,o,u,a,s,c,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),Vt=s(function(t){return-t}),$t=s(function(t){return!t}),Kt=c(function(t,e){var n=0>t?e.length+t:t;return w(e)?e.charAt(n):e[n]}),Yt=s(function(t){return function(){return Kt(t,arguments)}}),Zt=c(function(t,e){return e.charAt(0>t?e.length+t:t)}),zt=c(function(t,e){return e.charCodeAt(0>t?e.length+t:t)}),Qt=s(function(t){return[t]}),Xt=s(function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}}),Ht=function(){var t=function(e){return{value:e,map:function(n){return t(n(e))}}};return l(function(e,n,r){return e(function(e){return t(n(e))})(r).value})}(),te=c(function(t,e){if(null!=e){for(var n=e,r=0,i=t.length;i>r&&null!=n;r+=1)n=n[t[r]];return n}}),ee=c(function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n}),ne=c(function(t,e){for(var n={},r=0,i=t.length;i>r;){var o=t[r];n[o]=e[o],r+=1}return n}),re=c(function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}),ie=c(function(t,e){return u([t],e)}),oe=c(function(t,e){return e[t]}),ue=l(function(t,e,n){return null!=n&&y(e,n)?n[e]:t}),ae=l(function(t,e,n){return t(n[e])}),se=c(function(t,e){for(var n=t.length,r=[],i=0;n>i;)r[i]=e[t[i]],i+=1;return r}),ce=c(function(t,e){if(!_(t)||!_(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;e>r;)n.push(r),r+=1;return n}),le=l(function(t,e,n){for(var r=n.length-1;r>=0;)e=t(e,n[r]),r-=1;return e}),fe=s(S),pe=l(function(t,e,n){return u(C(n,0,Math.min(t,n.length)),C(n,Math.min(n.length,t+e)))}),he=l(function(t,e,n){return n.replace(t,e)}),de=s(function(t){return C(t).reverse()}),ye=l(function(t,e,n){for(var r=0,i=n.length,o=[e];i>r;)e=t(e,n[r]),o[r+1]=e,r+=1;return o}),ve=l(function(t,e,n){return Ht(t,U(e),n)}),ge=c(function(t,e){return C(e).sort(t)}),me=c(function(t,e){return C(e).sort(function(e,n){var r=t(e),i=t(n);return i>r?-1:r>i?1:0})}),_e=c(function(t,e){return t-e}),we=c(function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return C(e,n+1,1/0)}),be=c(function(t,e){return t(e),e}),xe=c(function(t,e){return i(t).test(e)}),Oe=c(function(t,e){for(var n=Number(e),r=new Array(n),i=0;n>i;)r[i]=t(i),i+=1;return r}),ke=s(function(t){var e=[];for(var n in t)y(n,t)&&(e[e.length]=[n,t[n]]);return e}),je=s(function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e}),Se=function(){var t="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",e="​",n="function"==typeof String.prototype.trim;return s(n&&!t.trim()&&e.trim()?function(t){return t.trim()}:function(e){var n=new RegExp("^["+t+"]["+t+"]*"),r=new RegExp("["+t+"]["+t+"]*$");return e.replace(n,"").replace(r,"")})}(),Ce=s(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),Pe=s(function(t){return function(){return t(C(arguments))}}),Me=s(function(t){return Wt(1,t)}),Ee=c(function(t,e){return nt(t,function(){for(var n,r=1,i=e,o=0;t>=r&&"function"==typeof i;)n=r===t?arguments.length:o+i.length,i=i.apply(this,C(arguments,o,n)),r+=1,o=n;return i})}),Ne=c(function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r}),De=c(function(t,e){for(var n,r=0,i=e.length,o=[];i>r;)n=e[r],a(t,n,o)||(o[o.length]=n),r+=1;return o}),Ie=l(function(t,e,n){return J(U(e),t,n)}),Le=s(function(t){for(var e=Pt(t),n=e.length,r=[],i=0;n>i;)r[i]=t[e[i]],i+=1;return r}),Ae=s(function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n}),Te=function(){var t=function(t){return{value:t,map:function(){return this}}};return c(function(e,n){return e(t)(n).value})}(),qe=c(function(t,e){for(var n in t)if(y(n,t)&&!t[n](e[n]))return!1;return!0}),Be=c(function(t,e){return nt(t.length,function(){return e.apply(this,u([t],arguments))})}),Fe=c(function(t,e){for(var n,r=0,i=t.length,o=e.length,u=[];i>r;){for(n=0;o>n;)u[u.length]=[t[r],e[n]],n+=1;r+=1}return u}),Re=c(function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);i>r;)n[r]=[t[r],e[r]],r+=1;return n}),Je=c(function(t,e){for(var n=0,r=t.length,i={};r>n;)i[t[n]]=e[n],n+=1;return i}),Ue=l(function(t,e,n){for(var r=[],i=0,o=Math.min(e.length,n.length);o>i;)r[i]=t(e[i],n[i]),i+=1;return r}),Ge=U(!1),We=U(!0),Ve=function(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return g(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,C(arguments,0,n-1))}},$e=function di(t,e,n){var r=function(r){for(var i=e.length,o=0;i>o;){if(t===e[o])return n[o];o+=1}e[o+1]=t,n[o+1]=r;for(var u in t)r[u]=di(t[u],e,n);return r};switch(Ce(t)){case"Object":return r({});case"Array":return r([]);case"Date":return new Date(t);case"RegExp":return i(t);default:return t}},Ke=function(t){return function(e){var n=C(arguments,1);return r(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})}},Ye=function(t,e,n){return function(){var r=arguments.length;if(0===r)return n();var i=arguments[r-1];if(!g(i)){var o=C(arguments,0,r-1);if("function"==typeof i[t])return i[t].apply(i,o);if(b(i)){var u=e.apply(null,o);return u(i)}}return n.apply(this,arguments)}},Ze=function yi(t,e,n,r){var i=Ce(t);if(i!==Ce(e))return!1;if("Boolean"===i||"Number"===i||"String"===i)return"object"==typeof t?"object"==typeof e&&mt(t.valueOf(),e.valueOf()):mt(t,e);if(mt(t,e))return!0;if("RegExp"===i)return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode;if(Object(t)===t){if("Date"===i&&t.getTime()!==e.getTime())return!1;var o=Pt(t);if(o.length!==Pt(e).length)return!1;for(var u=n.length-1;u>=0;){if(n[u]===t)return r[u]===e;u-=1}for(n[n.length]=t,r[r.length]=e,u=o.length-1;u>=0;){var a=o[u];if(!y(a,e)||!yi(e[a],t[a],n,r))return!1;u-=1}return n.pop(),r.pop(),!0}return!1},ze=function(t,e){return null!=e&&!g(e)&&"function"==typeof e[t]},Qe=function(t){return function e(n){for(var r,i,o,u=[],a=0,s=n.length;s>a;){if(jt(n[a]))for(r=t?e(n[a]):n[a],i=0,o=r.length;o>i;)u[u.length]=r[i],i+=1;else u[u.length]=n[a];a+=1}return u}},Xe=function(){function t(t,e,n){for(var r=0,i=n.length;i>r;){if(e=t["@@transducer/step"](e,n[r]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}function e(t,e,n){for(var r=n.next();!r.done;){if(e=t["@@transducer/step"](e,r.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function n(t,e,n){return t["@@transducer/result"](n.reduce(Y(t["@@transducer/step"],t),e))}var r="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(i,o,u){if("function"==typeof i&&(i=F(i)),jt(u))return t(i,o,u);if("function"==typeof u.reduce)return n(i,o,u);if(null!=u[r])return e(i,o,u[r]());if("function"==typeof u.next)return e(i,o,u);throw new TypeError("reduce: list must be array or iterable")}}(),He=function(){var t={"@@transducer/init":Array,"@@transducer/step":function(t,e){return u(t,[e])},"@@transducer/result":v},e={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":v},n={"@@transducer/init":Object,"@@transducer/step":function(t,e){return Ft(t,jt(e)?et(e[0],e[1]):e)},"@@transducer/result":v};return function(r){if(b(r))return r;if(jt(r))return t;if("string"==typeof r)return e;if("object"==typeof r)return n;throw new Error("Cannot create transformer for "+r)}}(),tn=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=S(this.xf["@@transducer/step"](t,!1))),t},c(function(e,n){return new t(e,n)})}(),en=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=S(this.xf["@@transducer/step"](t,!0))),t},c(function(e,n){return new t(e,n)})}(),nn=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=E.result,t.prototype["@@transducer/step"]=function(t,e){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},c(function(e,n){return new t(e,n)})}(),rn=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=E.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},c(function(e,n){return new t(e,n)})}(),on=function(){function t(t,e){this.xf=e,this.f=t,this.inputs={}}return t.prototype["@@transducer/init"]=E.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(y(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]),t["@@transducer/reduced"])){t=t["@@transducer/value"];break}return this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.f(e);return this.inputs[n]=this.inputs[n]||[n,[]],this.inputs[n][1]=W(e,this.inputs[n][1]),t},c(function(e,n){return new t(e,n)})}(),un=s(function(t){return nt(t.length,function(){var e=0,n=arguments[0],r=arguments[arguments.length-1],i=C(arguments);return i[0]=function(){var t=n.apply(this,u(arguments,[e,r]));return e+=1,t},t.apply(this,i)})}),an=c(Ye("all",tn,function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0})),sn=c(function(t,e){return ze("and",t)?t.and(e):t&&e}),cn=c(Ye("any",en,function(t,e){for(var n=0;n<e.length;){if(t(e[n]))return!0;n+=1}return!1})),ln=s(function(t){return Wt(2,t)}),fn=s(function(t){return $e(t,[],[])}),pn=c(function(t,e){if(g(e))return u(t,e);if(ze("concat",t))return t.concat(e);throw new TypeError("can't concat "+typeof t)}),hn=s(function(t){return nt(t.length,t)}),dn=c(Ye("dropWhile",rn,function(t,e){for(var n=0,r=e.length;r>n&&t(e[n]);)n+=1;return C(e,n)})),yn=c(function(t,e){return ze("equals",t)?t.equals(e):ze("equals",e)?e.equals(t):Ze(t,e,[],[])}),vn=c(Ye("filter",N,p)),gn=c(Ye("find",D,function(t,e){for(var n=0,r=e.length;r>n;){if(t(e[n]))return e[n];n+=1}})),mn=c(Ye("findIndex",I,function(t,e){for(var n=0,r=e.length;r>n;){if(t(e[n]))return n;n+=1}return-1})),_n=c(Ye("findLast",L,function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return e[n];n-=1}})),wn=c(Ye("findLastIndex",A,function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return n;n-=1}return-1})),bn=s(Qe(!0)),xn=s(function(t){return hn(function(e,n){var r=C(arguments);return r[0]=n,r[1]=e,t.apply(this,r)})}),On=c(Ve("forEach",function(t,e){for(var n=e.length,r=0;n>r;)t(e[r]),r+=1;return e})),kn=s(d(Pt)),jn=s(d(Mt)),Sn=c(Ye("groupBy",on,function(t,e){return Xe(function(e,n){var r=t(n);return e[r]=W(n,e[r]||(e[r]=[])),e},{},e)})),Cn=Kt(0),Pn=l(function(t,e,n){for(var r=[],i=0;i<e.length;)a(t,e[i],n)&&(r[r.length]=e[i]),i+=1;return De(t,r)}),Mn=c(Ve("intersperse",function(t,e){for(var n=[],r=0,i=e.length;i>r;)r===i-1?n.push(e[r]):n.push(e[r],t),r+=1;return n})),En=l(function(t,e,n){return b(t)?Xe(e(t),t["@@transducer/init"](),n):Xe(e(He(t)),t,n)}),Nn=s(function(t){for(var e=Pt(t),n=e.length,r=0,i={};n>r;){var o=e[r],u=t[o],a=y(u,i)?i[u]:i[u]=[];a[a.length]=o,r+=1}return i}),Dn=s(function(t){for(var e=Pt(t),n=e.length,r=0,i={};n>r;){var o=e[r];i[t[o]]=o,r+=1}return i}),In=Kt(-1),Ln=c(function(t,e){if(ze("lastIndexOf",e))return e.lastIndexOf(t);for(var n=e.length-1;n>=0;){if(yn(e[n],t))return n;n-=1}return-1}),An=c(Ye("map",T,x)),Tn=c(function(t,e){return Xe(function(n,r){return n[r]=t(e[r]),n},{},Pt(e))}),qn=c(function(t,e){return Xe(function(n,r){return n[r]=t(e[r],r,e),n},{},Pt(e))}),Bn=c(o(Ye("any",en,cn))),Fn=c(function(t,e){return ze("or",t)?t.or(e):t||e}),Rn=hn(Ke(u)),Jn=hn(Ke(xn(u))),Un=c(function(t,e){return Xe(function(e,n){var r=e[t(n)?0:1];return r[r.length]=n,e},[[],[]],e)}),Gn=l(function(t,e,n){return yn(te(t,n),e)}),Wn=c(function(t,e){return An(oe(t),e)}),Vn=l(function(t,e,n){return ae(yn(e),t,n)}),$n=l(function(t,e,n){return ae(kt(t),e,n)}),Kn=l(Xe),Yn=c(function(t,e){return vn(o(t),e)}),Zn=c(function(t,e){return Oe(U(t),e)}),zn=l(Ve("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)})),Qn=c(function(t,e){if(0>=t)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<e.length;)n.push(zn(r,r+=t,e));return n}),Xn=Kn(R,0),Hn=Ve("tail",zn(1,1/0)),tr=c(Ye("take",q,function(t,e){return zn(0,0>t?1/0:t,e)})),er=c(Ye("takeWhile",B,function(t,e){for(var n=0,r=e.length;r>n&&t(e[n]);)n+=1;return C(e,0,n)})),nr=nt(4,function(t,e,n,r){return Xe(t("function"==typeof e?F(e):e),n,r)}),rr=l(function(t,e,n){return De(t,u(e,n))}),ir=De(yn),or=s(Qe(!1)),ur=hn(function(t){var e=C(arguments,1),n=e.length;return hn(r(n,function(){for(var r=[],i=0;n>i;)r[i]=e[i](arguments[i]),i+=1;return t.apply(this,r.concat(C(arguments,n)))}))}),ar=c(function(t,e){return qe(Tn(yn,t),e)}),sr=function(){var t=function(t){return{"@@transducer/init":E.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?h(r):r}}};return function(e){var n=t(e);return{"@@transducer/init":E.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,e){return jt(e)?Xe(n,t,e):Xe(n,t,[e])}}}}(),cr=function(t,e,n){for(var r=n;r<t.length;){if(yn(t[r],e))return r;r+=1}return-1},lr=function(t){return function(e){var n=function(){var n=arguments;return t(function(t){return t.apply(null,n)},e)};return arguments.length>1?n.apply(null,C(arguments,1)):r(Math.max.apply(Math,Wn("length",e)),n)}},fr=c(function(t,e){return An(t,sr(e))}),pr=s(lr(an)),hr=s(lr(cn)),dr=c(function(t,e){return ze("ap",t)?t.ap(e):Xe(function(t,n){return u(t,An(n,e))},[],t)}),yr=hn(function(t){return t.apply(this,C(arguments,1))}),vr=c(Ye("chain",fr,function(t,e){return or(An(t,e))})),gr=l(function(t,e,n){function r(e,n){return dr(An(W,t(n)),e)}return Xe(r,e([]),n)}),mr=c(function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:hn(Wt(t,function(t,n,r,i,o,u,a,s,c,l){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);
case 4:return new e(t,n,r,i);case 5:return new e(t,n,r,i,o);case 6:return new e(t,n,r,i,o,u);case 7:return new e(t,n,r,i,o,u,a);case 8:return new e(t,n,r,i,o,u,a,s);case 9:return new e(t,n,r,i,o,u,a,s,c);case 10:return new e(t,n,r,i,o,u,a,s,c,l)}}))}),_r=nt(3,function(t){var e=C(arguments,1);return nt(Math.max.apply(Math,Wn("length",e)),function(){var n=arguments,r=this;return t.apply(r,x(function(t){return t.apply(r,n)},e))})}),wr=c(Ye("drop",nn,function(t,e){return zn(Math.max(0,t),1/0,e)})),br=c(function(t,e){return tr(t<e.length?e.length-t:0,e)}),xr=c(Ye("dropRepeatsWith",M,function(t,e){var n=[],r=1,i=e.length;if(0!==i)for(n[0]=e[0];i>r;)t(In(n),e[r])||(n[n.length]=e[r]),r+=1;return n})),Or=l(function(t,e,n){return yn(e[t],n[t])}),kr=c(function(t,e){return ze("indexOf",e)?e.indexOf(t):cr(e,t,0)}),jr=zn(0,-1),Sr=s(function(t){for(var e=t.length,n=0;e>n;){if(cr(t,t[n],n+1)>=0)return!1;n+=1}return!0}),Cr=c(function(t,e){return function(n){return function(r){return An(function(t){return e(t,r)},n(t(r)))}}}),Pr=s(function(t){return Cr(Kt(t),Ie(t))}),Mr=s(function(t){return Cr(oe(t),$(t))}),Er=c(function(t,e){var n=nt(t,e);return nt(t,function(){return Xe(dr,An(n,arguments[0]),C(arguments,1))})}),Nr=s(function(t){return Xn(t)/t.length}),Dr=s(function(t){var e=t.length;if(0===e)return NaN;var n=2-e%2,r=(e-n)/2;return Nr(C(t).sort(function(t,e){return e>t?-1:t>e?1:0}).slice(r,r+n))}),Ir=s(function(t){return Kn(Ft,{},t)}),Lr=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return nt(arguments[0].length,Kn(O,arguments[0],Hn(arguments)))},Ar=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return nt(arguments[0].length,Kn(k,arguments[0],Hn(arguments)))},Tr=Kn(Gt,1),qr=ur(x,ne,_t),Br=c(function(t,e){return wr(t>=0?e.length-t:0,e)}),Fr=function(t,e){return cr(e,t,0)>=0},Rr=function vi(t,e){var n=function(n){var r=e.concat([t]);return Fr(n,r)?"<Circular>":vi(n,r)},r=function(t,e){return x(function(e){return j(e)+": "+n(t[e])},e.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+x(n,t).join(", ")+"))";case"[object Array]":return"["+x(n,t).concat(r(t,Yn(xe(/^\d+$/),Pt(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+j(P(t))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+n(t.valueOf())+")":1/t===-(1/0)?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+n(t.valueOf())+")":j(t);case"[object Undefined]":return"undefined";default:return"function"==typeof t.constructor&&"Object"!==t.constructor.name&&"function"==typeof t.toString&&"[object Object]"!==t.toString()?t.toString():"{"+r(t,Pt(t)).join(", ")+"}"}},Jr=gr(_t),Ur=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Lr.apply(this,de(arguments))},Gr=function(){return 0===arguments.length?_t:Ur.apply(this,An(vr,arguments))},Wr=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return Ar.apply(this,de(arguments))},Vr=s(function(t){return mr(t.length,t)}),$r=c(Fr),Kr=c(function(t,e){for(var n=[],r=0,i=t.length;i>r;)Fr(t[r],e)||Fr(t[r],n)||(n[n.length]=t[r]),r+=1;return n}),Yr=s(Ye("dropRepeats",M(yn),xr(yn))),Zr=c(function(t,e){return ir(p(xn(Fr)(t),e))}),zr=s(function(t){return Er(t.length,t)}),Qr=c(function(t,e){var n={};for(var r in e)Fr(r,t)||(n[r]=e[r]);return n}),Xr=function(){return Gr.apply(this,de(arguments))},Hr=s(function(t){return Rr(t,[])}),ti=c(Ur(ir,u)),ei=c(function(t,e){for(var n,r,i=0,o=[],u=[];i<e.length;)r=e[i],n=t(r),Fr(n,o)||(u.push(r),o.push(n)),i+=1;return u}),ni=c(function(t,e){return nt(t+1,function(){var n=arguments[t];if(null!=n&&kt(Function,n[e]))return n[e].apply(n,C(arguments,0,t));throw new TypeError(Hr(n)+' does not have a method named "'+e+'"')})}),ri=ni(1,"join"),ii=s(function(t){var e={};return function(){var n=Hr(arguments);return y(n,e)||(e[n]=t.apply(this,arguments)),e[n]}}),oi=ni(1,"split"),ui=ni(0,"toLowerCase"),ai=ni(0,"toUpperCase"),si={F:Ge,T:We,__:t,add:R,addIndex:un,adjust:J,all:an,allPass:pr,always:U,and:sn,any:cn,anyPass:hr,ap:dr,aperture:G,append:W,apply:V,assoc:$,assocPath:K,binary:ln,bind:Y,both:Z,call:yr,chain:vr,clone:fn,commute:Jr,commuteMap:gr,comparator:z,complement:Q,compose:Ur,composeK:Gr,composeP:Wr,concat:pn,cond:X,construct:Vr,constructN:mr,contains:$r,containsWith:H,converge:_r,countBy:tt,createMapEntry:et,curry:hn,curryN:nt,dec:rt,defaultTo:it,difference:Kr,differenceWith:ot,dissoc:ut,dissocPath:at,divide:st,drop:wr,dropLast:br,dropLastWhile:ct,dropRepeats:Yr,dropRepeatsWith:xr,dropWhile:dn,either:lt,empty:ft,eqProps:Or,equals:yn,evolve:pt,filter:vn,find:gn,findIndex:mn,findLast:_n,findLastIndex:wn,flatten:bn,flip:xn,forEach:On,fromPairs:ht,functions:kn,functionsIn:jn,groupBy:Sn,gt:dt,gte:yt,has:vt,hasIn:gt,head:Cn,identical:mt,identity:_t,ifElse:wt,inc:bt,indexOf:kr,init:jr,insert:xt,insertAll:Ot,intersection:Zr,intersectionWith:Pn,intersperse:Mn,into:En,invert:Nn,invertObj:Dn,invoker:ni,is:kt,isArrayLike:jt,isEmpty:St,isNil:Ct,isSet:Sr,join:ri,keys:Pt,keysIn:Mt,last:In,lastIndexOf:Ln,length:Et,lens:Cr,lensIndex:Pr,lensProp:Mr,lift:zr,liftN:Er,lt:Nt,lte:Dt,map:An,mapAccum:It,mapAccumRight:Lt,mapObj:Tn,mapObjIndexed:qn,match:At,mathMod:Tt,max:qt,maxBy:Bt,mean:Nr,median:Dr,memoize:ii,merge:Ft,mergeAll:Ir,min:Rt,minBy:Jt,modulo:Ut,multiply:Gt,nAry:Wt,negate:Vt,none:Bn,not:$t,nth:Kt,nthArg:Yt,nthChar:Zt,nthCharCode:zt,of:Qt,omit:Qr,once:Xt,or:Fn,over:Ht,partial:Rn,partialRight:Jn,partition:Un,path:te,pathEq:Gn,pick:ee,pickAll:ne,pickBy:re,pipe:Lr,pipeK:Xr,pipeP:Ar,pluck:Wn,prepend:ie,product:Tr,project:qr,prop:oe,propEq:Vn,propIs:$n,propOr:ue,propSatisfies:ae,props:se,range:ce,reduce:Kn,reduceRight:le,reduced:fe,reject:Yn,remove:pe,repeat:Zn,replace:he,reverse:de,scan:ye,set:ve,slice:zn,sort:ge,sortBy:me,split:oi,splitEvery:Qn,subtract:_e,sum:Xn,tail:Hn,take:tr,takeLast:Br,takeLastWhile:we,takeWhile:er,tap:be,test:xe,times:Oe,toLower:ui,toPairs:ke,toPairsIn:je,toString:Hr,toUpper:ai,transduce:nr,trim:Se,type:Ce,unapply:Pe,unary:Me,uncurryN:Ee,unfold:Ne,union:ti,unionWith:rr,uniq:ir,uniqBy:ei,uniqWith:De,unnest:or,update:Ie,useWith:ur,values:Le,valuesIn:Ae,view:Te,where:qe,whereEq:ar,wrap:Be,xprod:Fe,zip:Re,zipObj:Je,zipWith:Ue};"object"==typeof n?e.exports=si:"function"==typeof define&&define.amd?define(function(){return si}):this.R=si}).call(this)},{}],5:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./feature_types/line"),c=r(s),l=t("./feature_types/point"),f=r(l),p=t("./feature_types/polygon"),h=r(p),d=t("./control"),y=r(d),v=function(t){function e(){i(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t.types={SQUARE:"square",POLYGON:"polygon",LINE:"line",POINT:"point"},t}return u(e,t),a(e,[{key:"add",value:function(t,e){var n=this;if(t=JSON.parse(JSON.stringify(t)),"FeatureCollection"===t.type)return t.features.map(function(t){return n.add(t,e)});t.geometry||(t={type:"Feature",id:t.id,geometry:t}),e||(e={}),e.map=this._map,e.data=t;var r;switch(t.geometry.type){case"Point":r=new f["default"](e);break;case"LineString":r=new c["default"](e);break;case"Polygon":r=new h["default"](e);break;default:throw new Error('MapboxGL Draw: Unsupported geometry type "'+t.geometry.type+'"')}r.ready=!0,r.created=!0;var i=this._store.set(r);return this._store._features[i].commited=!0,this.options.interactive&&this.select(r.drawId),r.drawId}},{key:"update",value:function(t,e){e=JSON.parse(JSON.stringify(e));var n=this._store.get(t);return n.setCoordinates(e.coordinates||e.geometry.coordinates),e.properties&&n.setProperties(e.properties),this._store._render(),this}},{key:"get",value:function(t){var e=this._store.get(t);return e&&e.toGeoJSON()}},{key:"getAll",value:function(){var t=this;return this._store.getAllIds().map(function(e){return t._store.get(e).toGeoJSON()}).reduce(function(t,e){return t.features.push(e),t},{type:"FeatureCollection",features:[]})}},{key:"startDrawing",value:function(){return null}},{key:"select",value:function(t){return this._store.get(t).options.permanent!==!0&&this._store.select(t),this}},{key:"selectAll",value:function(){var t=this;return this._store.getAllIds().filter(function(e){return t._store.get(e).options.permanent!==!0}).forEach(function(e){return t.select(e)}),this}},{key:"deselect",value:function(t){return this._store.commit(t),this}},{key:"deselectAll",value:function(){var t=this;return this._store.getSelectedIds().forEach(function(e){return t.commit(e)}),this}},{key:"getSelected",value:function(){var t=this;return this._store.getSelectedIds().map(function(e){return t._store.get(e).toGeoJSON()}).reduce(function(t,e){return t.features.push(e),t},{type:"FeatureCollection",features:[]})}},{key:"destroy",value:function(t){return this._store["delete"](t),this}},{key:"clear",value:function(){return this._store.deleteAll(),this}}]),e}(y["default"]);n["default"]=v},{"./control":6,"./feature_types/line":10,"./feature_types/point":11,"./feature_types/polygon":12}],6:[function(t,e,n){"use strict";function r(){}e.exports=r,r.prototype={addTo:function(t){this._map=t;var e=this._container=this.onAdd(t);if(this.options&&this.options.position){var n=this.options.position,r=t._controlCorners[n];e.className+=" mapboxgl-ctrl",-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}}},{}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function I(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:I(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=t("./lib/polyfills"),l=r(c),f=t("./api"),p=r(f),h=t("./util"),d=t("./theme/draw-selected"),y=r(d),v=t("./theme/draw"),g=r(v),m=t("./store"),_=r(m),w=t("./feature_types/line"),b=r(w),x=t("./feature_types/point"),O=r(x),k=t("./feature_types/square"),j=r(k),S=t("./feature_types/polygon"),C=r(S),P=t("./draw_events"),M=r(P);(0,l["default"])();var E={marker:!0,line:!0,shape:!0,square:!0,trash:!0},N={marker:!1,line:!1,shape:!1,square:!1,trash:!1},D=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{controls:{}}:arguments[0];i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n.options={drawing:!0,interactive:!1,position:"top-left",keybindings:!0,displayControlsDefault:!0,styles:{},controls:{}},t.displayControlsDefault===!1?t.controls=Object.assign(N,t.controls):t.controls=Object.assign(E,t.controls),n._events=(0,M["default"])(n),Object.assign(n.options,t),n}return u(e,t),a(e,[{key:"onAdd",value:function(t){var e=this,n=this._container=h.DOM.create("div","mapboxgl-ctrl-group",t.getContainer());return this._store=new _["default"](t,this),this._map=t,this.options.drawing&&this._createButtons(),t.style.loaded()?(this._setEventListeners(),this._setStyles()):t.on("load",function(){e._setEventListeners(),e._setStyles()}),n}},{key:"_createButtons",value:function(){var t=this._controlClass="mapbox-gl-draw_ctrl-draw-btn",e=this.options.controls;e.line&&(this.lineStringCtrl=(0,h.createButton)(this._container,{className:t+" mapbox-gl-draw_line",title:"LineString tool "+(this.options.keybindings&&"(l)"),fn:this.startDrawing.bind(this,this.types.LINE),id:"lineDrawBtn"},this._controlClass)),e.shape&&(this.polygonCtrl=(0,h.createButton)(this._container,{className:t+" mapbox-gl-draw_shape",title:"Polygon tool "+(this.options.keybindings&&"(p)"),fn:this.startDrawing.bind(this,this.types.POLYGON),id:"polygonDrawBtn"},this._controlClass)),e.square&&(this.squareCtrl=(0,h.createButton)(this._container,{className:t+" mapbox-gl-draw_square",title:"Square tool "+(this.options.keybindings&&"(s)"),fn:this.startDrawing.bind(this,this.types.SQUARE),id:"squareDrawBtn"},this._controlClass)),e.marker&&(this.markerCtrl=(0,h.createButton)(this._container,{className:t+" mapbox-gl-draw_marker",title:"Marker tool "+(this.options.keybindings&&"(m)"),fn:this.startDrawing.bind(this,this.types.POINT),id:"pointDrawBtn"},this._controlClass)),e.trash&&(this.deleteBtn=(0,h.createButton)(this._container,{className:t+" mapbox-gl-draw_trash",title:"delete",fn:this._destroy.bind(this),id:"deleteBtn"},this._controlClass),this._hideDeleteButton())}},{key:"_showDeleteButton",value:function(){this.options.controls.trash&&this.options.drawing&&(this.deleteBtn.style.display="block")}},{key:"_hideDeleteButton",value:function(){this.options.controls.trash&&this.options.drawing&&(this.deleteBtn.style.display="none")}},{key:"_destroy",value:function(){this._store.clearSelected(),this._handleDrawFinished()}},{key:"startDrawing",value:function(t){this._events.destroyNewFeature(),this._handleDrawFinished();var e=null;switch(t){case this.types.POLYGON:e=new C["default"]({map:this._map});break;case this.types.LINE:e=new b["default"]({map:this._map});break;case this.types.SQUARE:e=new j["default"]({map:this._map});break;case this.types.POINT:e=new O["default"]({map:this._map});break;default:return}e.startDrawing(),this._events.setNewFeature(e);var n=this._store.set(e);this.select(n)}},{key:"_handleDrawFinished",value:function(){var t=this;this._store.getSelectedIds().forEach(function(e){return t._store.commit(e)}),[this.lineStringCtrl,this.polygonCtrl,this.squareCtrl,this.markerCtrl].forEach(function(t){t&&t.classList.remove("active")})}},{key:"_setEventListeners",value:function(){this._map.on("click",this._events.onClick),this._map.on("dblclick",this._events.onDoubleClick),this._map.getContainer().addEventListener("mousedown",this._events.onMouseDown),this._map.getContainer().addEventListener("mouseup",this._events.onMouseUp),this._map.on("mousemove",this._events.onMouseMove),this._map.getContainer().addEventListener("keydown",this._events.onKeyDown),this.options.keybindings&&this._map.getContainer().addEventListener("keyup",this._events.onKeyUp)}},{key:"_setStyles",value:function(){var t=this;this._map.batch(function(e){e.addSource("draw",{data:{type:"FeatureCollection",features:[]},type:"geojson"});for(var n=0;n<g["default"].length;n++){var r=g["default"][n];Object.assign(r,t.options.styles[r.id]||{}),e.addLayer(r)}e.addSource("draw-selected",{data:{type:"FeatureCollection",features:[]},type:"geojson"});for(var n=0;n<y["default"].length;n++){var r=y["default"][n];Object.assign(r,t.options.styles[r.id]||{}),e.addLayer(r)}t._store._render()})}},{key:"_removeLayers",value:function(){this._map.batch(function(t){for(var e=0;e<g["default"].length;e++){var n=g["default"][e].id;t.removeLayer(n)}for(var e=0;e<y["default"].length;e++){var n=y["default"][e].id;t.removeLayer(n)}t.removeSource("draw"),t.removeSource("draw-selected")})}},{key:"_removeButtons",value:function(){if(this.options.drawing){var t=this.options.controls;t.trash&&this.deleteBtn.parentNode.removeChild(this.deleteBtn),t.square&&this.squareCtrl.parentNode.removeChild(this.squareCtrl),t.line&&this.lineStringCtrl.parentNode.removeChild(this.lineStringCtrl),t.shape&&this.polygonCtrl.parentNode.removeChild(this.polygonCtrl),t.marker&&this.markerCtrl.parentNode.removeChild(this.markerCtrl)}}},{key:"_removeEventListeners",value:function(){this._map.off("click",this._events.onClick),this._map.off("dblclick",this._events.onDoubleClick),this._map.off("mousemove",this._events.onMouseMove),this._map.getContainer().removeEventListener("mousedown",this._events.onMouseDown),this._map.getContainer().removeEventListener("mouseup",this._events.onMouseUp),this._map.getContainer().removeEventListener("keydown",this._events.onKeyDown),this.options.keybindings&&this._map.getContainer().removeEventListener("keyup",this._events.onKeyUp)}},{key:"remove",value:function(){this._removeLayers(),this._removeButtons(),this._removeEventListeners(),s(Object.getPrototypeOf(e.prototype),"remove",this).call(this)}}]),e}(p["default"]);n["default"]=D},{"./api":5,"./draw_events":8,"./feature_types/line":10,"./feature_types/point":11,"./feature_types/polygon":12,"./feature_types/square":13,"./lib/polyfills":16,"./store":17,"./theme/draw":19,"./theme/draw-selected":18,"./util":20}],8:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){var e=!1,n=null,r=!1,i=null,d=null,y=null,v=!1,g=function(){i.created?(t._handleDrawFinished(),i=null):i.toRemove&&(t._destroy(),i=null)},m={setNewFeature:function(t){i=t},destroyNewFeature:function(){i&&(i.toRemove=!0,i=null,t._destroy())},onMouseDown:function(r){if(e=!0,i)i.onMouseDown(r),t._store._render(),g();else{n=u.DOM.mousePos(r,t._map._container);var a=t._store.getSelectedIds();if(null===i&&a.length>0){var s=u.DOM.mousePos(r,t._map._container);v=!0,t._map.featuresAt([s.x,s.y],{radius:20},function(e,n){if(e)throw e;if(n=n.filter(function(t){return a.indexOf(t.properties.drawId||t.properties.parent)>-1}),n.length>0){var r=o["default"].find(function(t){return"midpoint"===t.properties.meta})(n);d=o["default"].find(function(t){return"vertex"===t.properties.meta})(n)||null,r&&null===d&&(t._store.get(r.properties.parent).addVertex([r.properties.lng,r.properties.lat],r.properties.index),d=r,t._store._render()),null===d&&(y=o["default"].find(function(t){return t.properties.drawId})(n).properties.drawId)}v=!1})}}},onMouseUp:function(o){if(e=!1,i)i.onMouseUp(o),t._store._render(),g();else{var a=u.DOM.mousePos(o,t._map.getContainer());r&&null===d&&null===y&&n.x!==a.x&&n.y!==a.y&&t._store.selectFeaturesIn(n,a),d&&(t._store.get(d.properties.parent).movingVertex=!1),d=null,y&&(t._store.get(y).translating=!1),y=null}n=null},onMouseMove:function(n){return e?(v&&n.originalEvent.stopPropagation(),m.onMouseDrag(n)):void(i&&(n.originalEvent.stopPropagation(),i.onMouseMove(n),t._store._render(),g()))},onMouseDrag:function(e){var r=u.DOM.mousePos(e.originalEvent,t._map.getContainer());d?(e.originalEvent.stopPropagation(),t._store.get(d.properties.parent).moveVertex(n,r,d.properties.index),t._store._render()):y&&(e.originalEvent.stopPropagation(),t._store.get(y).translate(n,r),t._store._render())},onClick:function(e){i?(i.onClick(e),t._store._render(),g()):t._map.featuresAt(e.point,{radius:10,layer:["gl-draw-polygon","gl-draw-line","gl-draw-point","gl-draw-selected-polygon","gl-draw-selected-line","gl-draw-selected-point"]},function(e,n){if(e)throw e;var i=[],o=[];n.forEach(function(e){var n=e.properties.drawId||e.properties.parent,r=t._store.get(n);r&&"vertex"===e.properties.meta?o.push([r,e.properties.index]):r&&e.properties.drawId&&r.getOptions().permanent!==!0&&!r.selected&&i.push(r)}),i.length>0?(r===!1&&t._handleDrawFinished(),t.select(i[0].drawId)):o.length>0?(o[0][0].removeVertex(o[0][1])&&t._store["delete"](o[0][0].drawId),t._store._render()):t._handleDrawFinished()})},onDoubleClick:function(e){i&&(i.onDoubleClick(e),t._store._render(),g())},onKeyUp:function(e){if(e.keyCode===s&&(r=!1),null===i)switch(e.keyCode){case h:t.startDrawing(t.types.LINE);break;case l:t.startDrawing(t.types.POINT);break;case f:t.startDrawing(t.types.POLYGON);break;case c:t.startDrawing(t.types.SQUARE);break;case p:t._store.revertSelected(),e.preventDefault();break;case a:t._handleDrawFinished()}else switch(e.keyCode){case a:i.onStopDrawing(e),g();break;case p:i.toRemove=!0,t._destroy(),i=null}},onKeyDown:function(t){t.keyCode===s&&(r=!0)}};return m};var i=t("ramda"),o=r(i),u=t("./util"),a=13,s=16,c=83,l=77,f=80,p=27,h=76},{"./util":20,ramda:4}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("hat"),a=r(u),s=t("../util"),c=function(){function t(e){i(this,t),this._map=e.map,this.drawId=e.data.id||(0,a["default"])(),this.coordinates=e.data.geometry.coordinates,this.properties=e.data.properties||{},this.type=e.type,this.options={permanent:e.permanent},this.created=!1,this.ready=!1,this.commited=!1,this.toRemove=!1,this.selected=!1,this.lastCoords=null}return o(t,[{key:"select",value:function(){this.selected=!0,null===this.lastCoords&&(this.lastCoords=JSON.stringify(this.coordinates))}},{key:"deselect",value:function(){this.selected=!1,this.lastCoords=null}},{key:"revert",value:function(){null!==this.lastCoords&&(this.coordinates=JSON.parse(this.lastCoords))}},{key:"startDrawing",value:function(){this._map.getContainer().classList.add("mapbox-gl-draw_activated"),this._map.options.doubleClickZoom&&this._map.doubleClickZoom.disable()}},{key:"onStopDrawing",value:function(){this.created=!this.toRemove,this._map.options.doubleClickZoom&&(this._map.doubleClickZoom.disable(),this._map.doubleClickZoom.enable()),this._map.getContainer().classList.remove("mapbox-gl-draw_activated")}},{key:"onClick",value:function(){return null}},{key:"onDoubleClick",value:function(){return null}},{key:"onMouseMove",value:function(){return null}},{key:"onMouseDown",value:function(){return null}},{key:"onMouseUp",value:function(){return null}},{key:"toGeoJSON",value:function(){return JSON.parse(JSON.stringify({type:"Feature",id:this.drawId,properties:this.properties,geometry:{type:this.type,coordinates:this.coordinates}}))}},{key:"getType",value:function(){return this.type}},{key:"getOptions",value:function(){return this.options}},{key:"setCoordinates",value:function(t){return this.coordinates=t,this}},{key:"setProperties",value:function(t){return t=JSON.parse(JSON.stringify(t)),this.properties=t,this}},{key:"translate",value:function(t,e){this.translating||(this.translating=!0,this.initGeom=this.toGeoJSON());var n=(0,s.translate)(this.initGeom,t,e,this._map);this.coordinates=n.geometry.coordinates}}]),t}();n["default"]=c},{"../util":20,hat:2}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function h(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:h(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=t("./feature"),l=r(c),f=t("../util"),p=function(t){function e(t){return i(this,e),t.data||(t.data={geometry:{coordinates:[[0,0],[0,0]]}}),t.type="LineString",o(this,Object.getPrototypeOf(e).call(this,t))}return u(e,t),a(e,[{key:"onClick",value:function(t){var e=[t.lngLat.lng,t.lngLat.lat];"undefined"==typeof this.vertexIdx?(this.coordinates=[e],this.vertexIdx=0,this.ready=!0):this.coordinates.splice(-1,1,e,e),this.vertexIdx++}},{key:"onMouseMove",value:function(t){var e=f.DOM.mousePos(t.originalEvent,this._map._container),n=this._map.unproject([e.x,e.y]);this.coordinates[this.vertexIdx]=[n.lng,n.lat]}},{key:"onStopDrawing",value:function(t){return this.onDoubleClick(t)}},{key:"onDoubleClick",value:function(t){var n=13,r=t.keyCode===n?1:2;this.coordinates=this.coordinates.slice(0,this.coordinates.length-r),1===this.coordinates.length&&(this.toRemove=!0),s(Object.getPrototypeOf(e.prototype),"onStopDrawing",this).call(this,t)}},{key:"moveVertex",value:function(t,e,n){this.movingVertex||(this.movingVertex=!0,this.initCoords=this.coordinates[n]);var r=e.x-t.x,i=e.y-t.y,o=(0,f.translatePoint)(JSON.parse(JSON.stringify(this.initCoords)),r,i,this._map);this.coordinates[n]=o}},{key:"addVertex",value:function(t,e){this.coordinates.splice(e,0,t)}},{key:"removeVertex",value:function(t){return this.coordinates.splice(t,1),this.coordinates.length<=1?(this.ready=!1,!0):!1}}]),e}(l["default"]);n["default"]=p},{"../util":20,"./feature":9}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./feature"),c=r(s),l=function(t){function e(t){return i(this,e),t.data||(t.data={geometry:{coordinates:[0,0]}}),t.type="Point",o(this,Object.getPrototypeOf(e).call(this,t))}return u(e,t),a(e,[{key:"onClick",value:function(t){this._map.getContainer().classList.remove("mapbox-gl-draw_activated"),this.coordinates=[t.lngLat.lng,t.lngLat.lat],this.created=!0,this.ready=!0}}]),e}(c["default"]);n["default"]=l},{"./feature":9}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function h(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:h(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},c=t("./feature"),l=r(c),f=t("../util"),p=function(t){function e(t){return i(this,e),t.data||(t.data={geometry:{coordinates:[[[0,0],[0,0],[0,0],[0,0]]]}}),t.type="Polygon",o(this,Object.getPrototypeOf(e).call(this,t))}return u(e,t),a(e,[{key:"onClick",value:function(t){var e=[t.lngLat.lng,t.lngLat.lat];"undefined"==typeof this.vertexIdx&&(this.vertexIdx=0,this.first=e,this.coordinates=[[e,e,e,e]],this.ready=!0),this.vertexIdx>1&&this.coordinates[0].push(this.first),this.coordinates[0][this.vertexIdx]=e,this.vertexIdx++}},{key:"onMouseMove",value:function(t){this.coordinates[0][this.vertexIdx]=[t.lngLat.lng,t.lngLat.lat]}},{key:"onStopDrawing",value:function(t){return this.onDoubleClick(t)}},{key:"onDoubleClick",value:function(t){var n=13;if(this.vertexIdx>2){var r=this.vertexIdx-(t.keyCode===n?0:1),i=t.keyCode===n?1:2;this.coordinates[0].splice(r,i),this.created=!0}(this.vertexIdx<3||this.coordinates[0].length<4)&&(this.toRemove=!0),s(Object.getPrototypeOf(e.prototype),"onStopDrawing",this).call(this,t)}},{key:"moveVertex",value:function(t,e,n){this.movingVertex||(this.movingVertex=!0,this.initCoords=JSON.parse(JSON.stringify(this.coordinates[0][n])));var r=e.x-t.x,i=e.y-t.y,o=(0,f.translatePoint)(this.initCoords,r,i,this._map);this.coordinates[0][n]=o,0===n&&(this.coordinates[0][this.coordinates[0].length-1]=o)}},{key:"addVertex",value:function(t,e){this.coordinates[0].splice(e,0,t)}},{key:"removeVertex",value:function(t){return this.coordinates[0].splice(t,1),this.coordinates[0][this.coordinates[0].length-1]=this.coordinates[0][0],this.coordinates[0].length<=3?(this.ready=!1,!0):!1}}]),e}(l["default"]);n["default"]=p},{"../util":20,"./feature":9}],13:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./polygon"),c=r(s),l=function(t){function e(t){return i(this,e),
t.data={geometry:{coordinates:[[[0,0],[0,0],[0,0],[0,0],[0,0]]]}},t.type="Polygon",o(this,Object.getPrototypeOf(e).call(this,t))}return u(e,t),a(e,[{key:"onMouseMove",value:function(t){if(this.ready){var e=this.coordinates[0][0];this.coordinates[0][1]=[e[0],t.lngLat.lat],this.coordinates[0][2]=[t.lngLat.lng,t.lngLat.lat],this.coordinates[0][3]=[t.lngLat.lng,e[1]],this.coordinates[0][4]=e}}},{key:"onClick",value:function(t){if(this.ready===!1){this.ready=!0;var e=[t.lngLat.lng,t.lngLat.lat];this.coordinates=[[e,e,e,e,e]]}else this.onMouseMove(t),this.onStopDrawing(t)}}]),e}(c["default"]);n["default"]=l},{"./polygon":12}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e){var n=[];for(var r in t)if("square"!==t[r].type){var i=t[r],o=i.toGeoJSON().geometry.coordinates;if("LineString"===i.toGeoJSON().geometry.type||"Polygon"===i.toGeoJSON().geometry.type){o="Polygon"===i.toGeoJSON().geometry.type?o[0]:o;for(var u=0;u<o.length-1;u++){var a=e.project([o[u][0],o[u][1]]),s=e.project([o[u+1][0],o[u+1][1]]),c=e.unproject([(a.x+s.x)/2,(a.y+s.y)/2]);n.push({type:"Feature",properties:{meta:"midpoint",parent:i.drawId,index:u+1,lng:c.lng,lat:c.lat},geometry:{type:"Point",coordinates:[c.lng,c.lat]}})}}}return n}},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){var e=[];for(var n in t){var r=t[n].toGeoJSON().geometry.coordinates,i=t[n].toGeoJSON().geometry.type;if("LineString"===i||"Polygon"===i){r="Polygon"===i?r[0]:r;for(var o="LineString"===i?r.length:r.length-1,u=0;o>u;u++)e.push({type:"Feature",properties:{meta:"vertex",parent:t[n].drawId,index:u},geometry:{type:"Point",coordinates:r[u]}})}}return e}},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){"function"!=typeof Object.assign&&!function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}}()}},{}],17:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./lib/create_midpoints"),a=r(u),s=t("./lib/create_vertices"),c=r(s),l=t("./util"),f=function(){function t(e,n){i(this,t),this._map=e,this._draw=n,this._features={},this._render=(0,l.throttle)(this.render,16,this)}return o(t,[{key:"set",value:function(t){return this._features[t.drawId]=t,this._render(),t.drawId}},{key:"get",value:function(t){return this._features[t]}},{key:"getAllIds",value:function(){return Object.keys(this._features)}},{key:"getSelectedIds",value:function(){var t=this;return Object.keys(this._features).filter(function(e){return t._features[e].selected===!0})}},{key:"delete",value:function(t){if(this._features[t]){var e=this._features[t].created?this._features[t].toGeoJSON():null;delete this._features[t],e&&this._map.fire("draw.delete",{id:t,geojson:e}),this._render()}}},{key:"clearSelected",value:function(){var t=this;this.getSelectedIds().forEach(function(e){t.get(e).created===!1&&t.get(e).onStopDrawing({}),t["delete"](e)})}},{key:"deleteAll",value:function(){var t=this;Object.keys(this._features).forEach(function(e){t["delete"](e)})}},{key:"revertSelected",value:function(){var t=this;this.getSelectedIds().forEach(function(e){t.get(e).revert(),t.get(e).deselect()}),this.render()}},{key:"select",value:function(t){this._features[t]&&!this._features[t].selected&&(this._features[t].select(),this._render(),this._features[t].commited&&this._features[t].ready&&this._map.fire("draw.select.start",{id:t,geojson:this._features[t].toGeoJSON()}))}},{key:"commit",value:function(t){this._features[t]&&this._features[t].selected&&(this._features[t].deselect(),this._render(),this._features[t].commited?this._map.fire("draw.select.end",{id:t,geojson:this._features[t].toGeoJSON()}):this._features[t].commited=!0,this._map.fire("draw.set",{id:t,geojson:this._features[t].toGeoJSON()}))}},{key:"isSelected",value:function(){var t=this;return Object.keys(this._features).some(function(e){return t._features[e].selected===!0})}},{key:"selectFeaturesIn",value:function(t,e){var n=this,r=t.x<e.x?t.x:e.x,i=t.y<e.y?t.y:e.y,o=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,a=[[r,i],[o,u]],s=["gl-draw-polygon","gl-draw-line","gl-draw-point"];this._map.featuresIn(a,{layers:s,type:"vector"},function(t,e){if(t)throw t;e.reduce(function(t,e){var r=e.properties.drawId;return n._features[r]&&void 0===t[r]&&(t[r]=1,n.select(r)),t},{})})}},{key:"render",value:function(){var t=this,e=void 0!==this._map.getSource("draw");if(e){var n=Object.keys(this._features).reduce(function(e,n){if(t._features[n].ready){var r=t._features[n].toGeoJSON();r.properties.drawId=n,t._features[n].selected===!0?(e.selected.push(r),e.selected=e.selected.concat((0,a["default"])([t._features[n]],t._map),(0,c["default"])([t._features[n]]))):e.deselected.push(r)}return e},{deselected:[],selected:[]});n.selected.length>0?this._draw._showDeleteButton():this._draw._hideDeleteButton(),this._map.getSource("draw").setData({type:"FeatureCollection",features:n.deselected}),this._map.getSource("draw-selected").setData({type:"FeatureCollection",features:n.selected})}}}]),t}();n["default"]=f},{"./lib/create_midpoints":14,"./lib/create_vertices":15,"./util":20}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=[{id:"gl-draw-selected-line",type:"line",source:"draw-selected",filter:["all",["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000000","line-dasharray":[0,2],"line-width":3},interactive:!0},{id:"gl-draw-selected-polygon",type:"fill",source:"draw-selected",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":"#000000","fill-opacity":.25},interactive:!0},{id:"gl-draw-selected-polygon-stroke",type:"line",source:"draw-selected",filter:["all",["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000000","line-dasharray":[2,2],"line-width":3},interactive:!0},{id:"gl-draw-selected-point",type:"circle",source:"draw-selected",filter:["all",["==","$type","Point"],["!=","meta","midpoint"]],layout:{},interactive:!0},{id:"gl-draw-selected-point-mid",type:"circle",source:"draw-selected",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":4,"circle-color":"#000000"},interactive:!0}]},{}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=[{id:"gl-draw-polygon",type:"fill",source:"draw",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":"#ff00ff","fill-outline-color":"#ff00ff","fill-opacity":.25},interactive:!0},{id:"gl-draw-polygon-stroke",type:"line",source:"draw",filter:["all",["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ff00ff","line-width":2},interactive:!0},{id:"gl-draw-line",type:"line",source:"draw",filter:["all",["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ff00ff","line-width":2},interactive:!0},{id:"gl-draw-point",type:"circle",source:"draw",filter:["all",["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#ff00ff"},interactive:!0}]},{}],20:[function(t,e,n){"use strict";function r(t){for(var e=0;e<t.length;e++)if(t[e]in a)return t[e]}function i(t,e,n){var r,i,o,u;return u=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(u,e),r=!0)}}var o=t("point-geometry"),u={};u.mousePos=function(t,e){var n=e.getBoundingClientRect();return new o(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},u.create=function(t,e,n,r){var i=document.createElement(t);if(e&&(i.className=e),r)for(var o in r)i.setAttribute(o,r[o]);return n&&n.appendChild(i),i},u.removeClass=function(t,e){Array.prototype.forEach.call(t,function(t){t.classList.remove(e)})};var a=document.documentElement.style,s=r(["transform","WebkitTransform"]);u.setTransform=function(t,e){t.style[s]=e};var c,l=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);u.disableSelection=function(){l&&(c=a[l],a[l]="none")},u.enableSelection=function(){l&&(a[l]=c)},e.exports.createButton=function(t,e,n){var r={title:e.title};e.id&&(r.id=e.id);var i=u.create("button",e.className,t,r);return i.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var r=t.target;r.classList.contains("active")?r.classList.remove("active"):(u.removeClass(document.querySelectorAll("."+n),"active"),r.classList.add("active"),e.fn())},!0),i},e.exports.translate=function(t,e,n,r){t=JSON.parse(JSON.stringify(t));var i,o,u=n.x-e.x,a=n.y-e.y,s=t.geometry;if("Polygon"===s.type)for(i=s.coordinates[0].length,o=0;i>o;o++)s.coordinates[0][o]=f(s.coordinates[0][o],u,a,r);else if("LineString"===s.type)for(i=s.coordinates.length,o=0;i>o;o++)s.coordinates[o]=f(s.coordinates[o],u,a,r);else s.coordinates=f(s.coordinates,u,a,r);return t};var f=function(t,e,n,r){var i=r.project([t[0],t[1]]);return i=r.unproject([i.x+e,i.y+n]),[i.lng,i.lat]};e.exports.throttle=i,e.exports.DOM=u,e.exports.translatePoint=f},{"point-geometry":3}]},{},[1]);
