<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="refresh" content="10; url=https://demo.gbif.org/tools/species-population">
    <meta name="viewport" content="width = device-width, initial-scale = 1">

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000">
    <meta name="msapplication-TileColor" content="#000">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#000">

    <title>GBIF relative abundance</title>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.15.0/mapbox-gl.css' rel='stylesheet'/>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/chartist/0.9.7/chartist.min.css' rel='stylesheet'/>

    <!-- style:css -->
    <link rel="stylesheet" href="css/index.min-c55b50f1.css">
    <!-- endinject -->


</head>
<body>

<div id="page-wrapper" class="page-wrapper">
    <div class="blanket help">
        <div class="help__content">
            <span class="blanket__close">&#x2715;</span>
            <h2>Exploring species population trends</h2>
            <h3>Lepidoptera</h3>
            <p>
                This pilot tool is intended to help users determine if GBIF mediated data is likely to be suitable for deriving species population trends. The tool allows a user to navigate to a location and timespan of interest, and then it provides an analysis showing if the population for the species is in decline or increase.  This analysis involves normalizing the data for the species against all data collected for the group (Lepidoptera).  By normalizing against the group, the analysis attempts to compensate for biases in sampling effort.  In many cases this will work well, but in other cases this may provide misleading insights â€“ however, by providing a transparent view of the process, the user can judge if there appears to be sufficient data to investigate further.
            </p>
            <p>To explain the algorithm, please consider the following:</p>
            <div class="help__process">
                <div>
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             viewBox="0 0 330.8 287" xml:space="preserve">
                        <polygon class="st0" points="84.4,284 3.5,143.5 84.4,3 246.4,3 327.3,143.5 246.4,284 "/>
                        <circle class="st1" cx="94.8" cy="28.1" r="10.4"/>
                        <circle class="st2" cx="180.6" cy="25.2" r="10.4"/>
                        <circle class="st1" cx="219.7" cy="244.6" r="10.4"/>
                        <circle class="st1" cx="99.5" cy="234.5" r="10.4"/>
                        <circle class="st1" cx="167.5" cy="216.3" r="10.4"/>
                        <circle class="st1" cx="64.5" cy="175.2" r="10.4"/>
                        <circle class="st1" cx="121.8" cy="185.3" r="10.4"/>
                        <circle class="st1" cx="238.1" cy="189" r="10.4"/>
                        <circle class="st1" cx="104.5" cy="98.7" r="10.4"/>
                        <circle class="st2" cx="159.7" cy="102.3" r="10.4"/>
                        <circle class="st2" cx="260.8" cy="111.9" r="10.4"/>
                        <circle class="st2" cx="238" cy="61.1" r="10.4"/>
                    </svg>
                    <div class="desc">
                        <p>1968</p>
                        <p>4 Early Thorn occurrences out of a total of 12 Lepidoptera</p>
                        <p>33.33% of the total population</p>
                    </div>
                </div>

                <div>
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             viewBox="0 0 330.8 287" style="enable-background:new 0 0 330.8 287;" xml:space="preserve">
                        <polygon class="st0" points="84.4,284 3.5,143.5 84.4,3 246.4,3 327.3,143.5 246.4,284 "/>
                        <circle class="st1" cx="267.8" cy="170.1" r="10.4"/>
                        <circle class="st1" cx="95.3" cy="178.5" r="10.4"/>
                        <circle class="st1" cx="105.8" cy="130" r="10.4"/>
                        <circle class="st2" cx="208.4" cy="197.4" r="10.4"/>
                        <circle class="st2" cx="145.9" cy="50.4" r="10.4"/>
                        <circle class="st2" cx="266.6" cy="119.9" r="10.4"/>
                    </svg>
                    <div class="desc">
                        <p>2002</p>
                        <p>3 Early Thorn occurrences out of a total of 6 Lepidoptera</p>
                        <p>50% of the total population</p>
                    </div>
                </div>

                <div>
                    <div class="ct-example">
                        <svg width="100%" height="100%" class="ct-chart-line" style="width: 100%; height: 100%;">
                            <g class="ct-grids">
                                <line y1="90" y2="90" x1="80" x2="190" class="ct-grid ct-vertical"/>
                                <line y1="66" y2="66" x1="80" x2="190" class="ct-grid ct-vertical"/>
                                <line y1="42" y2="42" x1="80" x2="190" class="ct-grid ct-vertical"/>
                            </g>
                            <g>
                                <g series-name="points" class="ct-series ct-series-a">
                                    <line x1="80" y1="50.4" x2="80.01" y2="50.4" class="ct-point" value="0.33"/>
                                    <line x1="190" y1="30" x2="190.01" y2="30" class="ct-point" value="0.5"/>
                                </g>
                                <g series-name="line" class="ct-series ct-series-b">
                                    <path d="M80,50.4L190,30" class="ct-line"/>
                                </g>
                                <g series-name="groupLine" class="ct-series ct-series-c">
                                    <path d="M80,90L80,30L190,60L190,90Z" class="ct-area"/>
                                </g>
                            </g>
                            <g class="ct-labels">
                                <foreignObject style="overflow: visible;" x="80" y="95" width="110" height="20">
                                    <span xmlns="http://www.w3.org/2000/xmlns/" class="ct-label ct-horizontal ct-end" style="width: 110px; height: 20px">1968</span>
                                </foreignObject>
                                <foreignObject style="overflow: visible;" x="190" y="95" width="30" height="20">
                                    <span xmlns="http://www.w3.org/2000/xmlns/" class="ct-label ct-horizontal ct-end" style="width: 30px; height: 20px">2002</span>
                                </foreignObject>
                                <foreignObject style="overflow: visible;" y="66" x="30" height="24" width="40">
                                    <span xmlns="http://www.w3.org/2000/xmlns/" class="ct-label ct-vertical ct-start" style="height: 24px; width: 40px">0</span>
                                </foreignObject>
                                <foreignObject style="overflow: visible;" y="42" x="30" height="24" width="40">
                                    <span xmlns="http://www.w3.org/2000/xmlns/" class="ct-label ct-vertical ct-start" style="height: 24px; width: 40px">0.2</span>
                                </foreignObject>
                                <foreignObject style="overflow: visible;" y="12" x="30" height="30" width="40">
                                    <span xmlns="http://www.w3.org/2000/xmlns/" class="ct-label ct-vertical ct-start" style="height: 30px; width: 40px">0.4</span>
                                </foreignObject>
                            </g>
                        </svg>
                    </div>
                    <div class="desc">
                        <p>Linear regression</p>
                        <p>
                            Find the line that best describes the data. The slope tells us how fast the species is in decline or growth. In this example it is easy as we only use two points.
                        </p>
                        <p>
                            The grey area shows the total amount of Lepidoptera normalized to fit the chart.
                        </p>
                        <p>
                            It grew from 33.33% to 50% over 34 years, so is said to be growing annually at a rate of 0.49%.  The increase from 33.33% to 50% represents a 50% increase from the original value.
                        </p>
                    </div>
                </div>

                <div>
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             viewBox="0 0 330.8 287" style="enable-background:new 0 0 330.8 287;" xml:space="preserve">
                        <polygon class="st0 result" points="84.4,284 3.5,143.5 84.4,3 246.4,3 327.3,143.5 246.4,284 "/>
                    </svg>
                    <div class="desc">
                        <p>Trend in period from 1968 - 2002</p>
                        <p>
                            The species is in growth relative to the total abundance of Lepidoptera.  The locations on the map are colored based on the annual growth rates, to allow users to locate areas in decline or increase over the time range.
                        </p>
                    </div>
                </div>

            </div>
            <p>
                All data that is used for this application is available for download through GBIF.org.
            </p>
            <p>
                We welcome all feedback and feature requests for this tool, as we strive towards a better understanding of what analyses are possible with the data that is openly available.
            </p>
            <span class="blanket__close button">Close</span>
        </div>
    </div>
    <main class="mapFocus">
        <section class="story" id="story">
            <div class="mapwrapper" id="mapwrapper">
                <div class='map-overlay top'>
                    <div class='map-overlay-inner'>
                        <fieldset>
                            <label>Year range (<span id="years">1900 - 2016</span>)</label>
                            <label id='month'></label>
                            <div id='slider'/>
                        </fieldset>
                    </div>
                </div>
                <div id='map' class="map"></div>
            </div>
            <div class="storyline">
                <span class="storyline__close">&#x2715;</span>
                <div class="chapter app" id="app">
                    <div class="appLogo"></div>
                    <h1>Species populations trends</h1>
                    <p class="description"><strong>This pilot project has been integrated into the new GBIF portal.  You will be redirected to <a href="https://demo.gbif.org/tools/species-population">https://demo.gbif.org/tools/species-population</a> in 10 seconds.</p>
                    <p class="description">A pilot to explore if GBIF data supports inference of population trends. <a href="#" class="blanket__open">Read full explanation</a></p>
                    <div class="speciesSelector step">
                        <span class="numbering">1</span>
                        <p>Select a species</p>
                        <select onchange="updateSpecies(this)" id="SpeciesSelect">
                            <option value="1898286" select>Red Admiral (Vanessa atalanta)</option>
                            <option value="1958323">Swallow-tailed moth (Ourapteryx sambucaria)</option>
                            <option value="1962204">Early thorn (Selenia dentaria)</option>
                        </select>
                        <p id="speciesTypeahead">
                            <span class="speciesTypeahead">
                                <input class="typeahead" type="text" placeholder="Search species. e.g. Hoplodrina ambigua">
                            </span>
                        </p>
                    </div>
                    <div class="step">
                        <span class="numbering">2</span>
                        <p>
                            Select binning
                            <select onchange="updateMap(this)" id="mapType">
                                <option value="points">1km points</option>
                                <option value="hex" selected>Hexagons</option>
                            </select>
                            <span id="hexSizeCtrl">
                                size
                                <select onchange="updateHexThreshold(this)" id="hexRadius">
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5" selected>5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="15">15</option>
                                    <option value="25">25</option>
                                </select>
                            </span>
                        </p>
                    </div>
                    <div class="step">
                        <span class="numbering">3</span>
                        <p>
                            Select the minimum number of years of data required per location to be included:
                            <select onchange="updateYearThreshold(this)" id="yearThreshold">
                                <option value="1">1 year (regression not possible)</option>
                                <option value="2">2 years</option>
                                <option value="5">5 years</option>
                                <option value="10">10 years</option>
                                <option value="15" selected>15 years</option>
                                <option value="25">25 years</option>
                            </select>
                        </p>
                    </div>

                    <div class="step">
                        <span class="numbering">4</span>
                        <p>Select area by clicking on the map or shift-dragging a bounding box.</p>
                    </div>
                    <div class="step charts">
                        <span class="numbering help blanket__open" id="help">?</span>
                        <div>
                            <div class="chartContainer">
                                <div class="ct-chart"></div>
                                <div class="ct-chart-group-data"></div>
                            </div>
                            <div id="stats">
                                <div class="statsHighlight">
                                    <div class="statsHighlight__year">
                                        <div class="circle positive"></div>
                                        <p>Annual <span class="growth">growth</span><span class="decline">decline</span> rate</p>
                                    </div>
                                    <div class="statsHighlight__yearspan">
                                        <div class="circle positive"></div>
                                        <p><span class="growth">Growth</span><span class="decline">Decline</span> from initial level</p>
                                    </div>
                                </div>
                                <!--<p id="interceptStdErr">Intercept std err: <span></span></p>-->
                                <!--<p id="meanSquareError">Mean sq err: <span></span></p>-->
                                <!--<p id="significance">Significance: <span></span></p>-->
                                <!--<p id="slopeStdErr">Slope std err: <span></span></p>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/8.3.0/nouislider.min.js"></script>
<!-- inject:js -->
<script src="scripts/script.min-3e83a6c6.js"></script>
<!-- endinject -->
</body>
</html>
